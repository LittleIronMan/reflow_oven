<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Reflow Oven</title>

    <link rel="stylesheet" href="/public/main.css">
    <link rel="stylesheet" href="/bootstrap-grid/bootstrap-grid.css">
    <script src="/socket.io/socket.io.js"></script>
    <script>
	var socket = io();
	var tempLabel = {};
	var graph = {};
    var currentPoints = [];
	socket.on('temp measure', function(data) {
		//console.log('Temp event, value == ', data);

        if (currentPoints.length > 100) { currentPoints.shift(); } // удаляем устаревшие данные, если их много
        currentPoints.push(data);

		if (tempLabel.hasOwnProperty('update')) {
		    tempLabel.update(data.temp);
		    // console.log("Push point: ", data);
		    // console.log("currentPoints.length == ", currentPoints.length);
        }
        if (tempLabel.hasOwnProperty('update')) {
            graph.update();
        }
	});
    </script>
</head>
<body>
    <div id="app"></div>
    <script src="/public/bundle.js"></script>
</body>
</html>
